<div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow">
  <h2 class="text-2xl font-bold mb-6">Th√¥ng tin Gi√°o vi√™n</h2>

  <!-- ===== FORM UPDATE (PATCH) ===== -->
  <%= form_with model: @teacher,
                url: admin_teacher_path(@teacher),
                method: :patch,
                local: true do |f| %>

    <!-- BASIC INFO -->
    <div class="grid grid-cols-2 gap-6">
      <div>
        <%= f.label :full_name, "H·ªç t√™n", class: "label" %>
        <%= f.text_field :full_name, class: "input" %>
      </div>

      <div>
        <%= f.label :email, "Email", class: "label" %>
        <%= f.email_field :email, class: "input" %>
      </div>
    </div>

    <!-- PROFILE -->
    <%= f.fields_for :teacher_profile do |p| %>

      <div class="mt-6">
        <%= p.label :avatar, "Avatar", class: "label" %>

        <% if p.object.avatar.attached? %>
          <div class="mb-3">
          <%= image_tag p.object.avatar.variant(resize_to_fill: [80, 80]).processed,
          class: "rounded-full object-cover border",
          alt: "Avatar",
          srcset: "#{url_for(p.object.avatar.variant(resize_to_fill: [80, 80]).processed)}?#{Time.current.to_i}" %>

          </div>
        <% end %>

        <%= p.file_field :avatar, class: "input" %>
      </div>

      
      <div class="mt-6">
        <%= p.label :expertise, "Chuy√™n m√¥n", class: "label" %>
        <%= p.text_field :expertise, class: "input" %>
      </div>

      <div class="mt-4">
        <%= p.label :experience_years, "S·ªë nƒÉm kinh nghi·ªám", class: "label" %>
        <%= p.number_field :experience_years, class: "input" %>
      </div>

      <div class="mt-4">
        <%= p.label :bio, "Gi·ªõi thi·ªáu", class: "label" %>
        <%= p.text_area :bio, rows: 4, class: "input" %>
      </div>
    <% end %>

    <!-- SAVE BUTTON -->
    <div class="mt-8 text-right">
      <%= f.submit "üíæ L∆∞u thay ƒë·ªïi",
            class: "px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-500" %>
    </div>

  <% end %>

  <!-- ===== DELETE (PH·∫¢I N·∫∞M NGO√ÄI FORM) ===== -->
  <div class="mt-6 flex justify-end">
    <%= button_to "üóë X√≥a gi√°o vi√™n",
          admin_teacher_path(@teacher),
          method: :delete,
          data: { confirm: "B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a gi√°o vi√™n n√†y?" },
          class: "px-5 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500" %>
  </div>

  <% if @teacher.errors.any? %>
  <div class="bg-red-100 text-red-700 p-4 rounded mb-4">
    <ul>
      <% @teacher.errors.full_messages.each do |msg| %>
        <li>‚Ä¢ <%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

</div>
<style>
.label {
  display: block;
  font-weight: 600;
  margin-bottom: 6px;
}

.input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ddd;
}

.avatar-wrapper {
  border-radius: 9999px;
  overflow: hidden;
  flex-shrink: 0;
  background: #f3f4f6;
}

.avatar-img {
  width: 50%;
  height: 50%;
  object-fit: cover;
  display: block;
}

.avatar-placeholder {
  width: 100%;
  height: 100%;
  background: #e5e7eb;
}

</style>
